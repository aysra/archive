<!DOCTYPE html>
<title>Stream Archiving Guide (Windows)</title>
<style>
  body {
    background: Black;
    color: Gainsboro;
	font-family: Sans-Serif;
	}
  main {
    margin-bottom: 200%;
  }
  .general-text {
	margin-left: 200px;
  }
  h1 {
	margin-left: 200px;
	font-size: 1.5em;
  }
  h2 {
	margin-left: 200px;
	font-size: 1.2em;
	
  }
  h3 {
	margin-left: 215px;
	font-size: 1.1em;	
  }
  h4 {
  	margin-left: 230px;
    font-size: 0.9em;
	font-weight: normal;
  }
  .cmds {
   border: 2px solid darkgrey;
   background-color: #1f1f1f;    
   text-align: left;
   color: white;
   font-family: Sans-Serif;
   margin-left: 5px;
   margin-right: 180px;
   padding: 5px;
  }
  .url {
  text-decoration: underline; 
  color: #ccffff;
  }
  .mod {
  color: orange;
  }
  .emp {
  color:lightcoral; 
  font-weight: bold;
  }
  .floating-menu {
    font-family: sans-serif;
    background: DimGrey;
    padding: 5px;;
    width: 160px;
    z-index: 100;
    position: fixed;
  }
  .floating-menu a, 
  .floating-menu h3 {
    font-size: 0.9em;
    display: block;
    margin: 0 0.5em;
    color: Gainsboro;
  }
  a:link,a:visited{text-decoration:underline; color:#c6d9f0;}
  a:hover{text-decoration:underline; color:#ffffff;}
  img {
  border: 1px solid #ddd;
  border-radius: 4px;
  padding: 5px;
  margin-left: 5px;
}

</style>
<main>
  <nav class="floating-menu">
    <br />
	<h3>Menu</h3><br />
    <a href="#download"><b>Download</b></a><br />
    <a href="#install"><b>Installation</b></a><br />
    <a href="#basic"><b>Basic bsage</b></a><br />
    <a href="#ytaqol"><b>ytarchive tips</b></a>
	<a href="#ytmon">-monitor channels</a><br />
	<a href="#ytdqol"><b>yt-dlp tips</b></a><br />
	<a href="#bat"><b>1-click bat files</b></a><br />
  </nav>
  <h1>Stream Archiving Guide (for Windows, mainly)</h1>
  <br /> 
  <h2><a id="download">Download</a></h2>
  <h3>yt-dlp interface - <a href="https://github.com/ErrorFlynn/ytdlp-interface">https://github.com/ErrorFlynn/ytdlp-interface</a></h3>
  <h4>GUI for yt-dlp, as well as a handy tool for checking and obtaining updates for yt-dlp and ffmpeg.<br />

	<img src="01-ytdlp interface.png" alt="screenshot of ytdlp infereface update page" /><br />
	Alternatively, you can download yt-dlp and ffmpeg yourself at <a href="https://github.com/yt-dlp">https://github.com/yt-dlp</a><br />
  </h4>
  <h3>ytarchive - <a href="https://github.com/Kethsar/ytarchive">https://github.com/Kethsar/ytarchive</a></h3>
  <h4>Easiest tool to monitor channels for live streams and download from the start even if you start half way.<br /></h4>

  <br /> 
  <h2><a id="install">Installation</a></h2>
  <h3>Step 1: Extract all the above to an easily accessable folder. </h3>
  <h4>Personally I prefer to keeping them all in the same place, for example: <strong>C:\yt\</strong><br /> 
  
  <h3>Step 2: Set up PATH to the folder (To run the exe from any location)</h3>
  <h4> Typing "<strong>Environment</strong>" in the startmenu should bring up "<strong>Edit System Environment Varibles</strong>". <br />
  <br />
  If not, Right-click the Windows icon &gt; "<strong>System</strong>" &gt; "<strong>Related Settings</strong>" (to the right)&gt; "<strong>Advanced System Settings</strong>" &gt; "<strong>Environment Variables</strong>" &gt; <strong>PATH</strong> (the "system variable" one in the lower table)<br />Add a new entry with the path in step 2.</p>
  <img src="02-enviornment variable.png" alt="getting to environment variables" />
  <img src="03-PATH.png" alt="path settings in environment variables" />
  </h4>
  
  <br />
   
  <h2><a id="basic">Basic Usage</a></h2>
  
  <h3>Archiving ongoing streams using ytarchive</h3>
  <h4>Browse to the folder you want to save the vod to. Type "cmd" in the address bar to open the command prompt. <br />
  <img src="04-cmd.gif" alt="cmd prompt from file explorer " /> <br /><br />
  Type in the following commands and follow the prompt:
  <div class="cmds">ytarchive <span class="url">https://www.youtube.com/watch?v=######</span></div><br />
  Or the following skip the prompt: 
  <div class="cmds">ytarchive <span class="mod">-w</span> <span class="url">https://www.youtube.com/watch?v=######</span> <span class="mod">best</span> </div>
  (<span class="mod">-w</span>: wait for scheduled time, <span class="mod">best</span>: best quality. You can replace these with <span class="mod">-r 30</span> (poll every 30s), and list preferred bitrate if you a smaller file - include "best" as a failsafe in case the prefered bitrate is not avalible, eg: <span class="mod">720/720p60/best</span>) <br />
  <br /> 
  </h4> 
  
  <h3>Monito a channel for livestreams</h3>
  <h4>You can monitor a channel for any livestreams, even before a waiting room was created by using the following commands with a <span class="emp">/live</span> added to the <strong>channel url</strong><br />
    <div class="cmds">ytarchive <span class="mod">--monitor-channel</span> <span class="url">https://www.youtube.com/channel/######<span class="emp">/live</span></span> <span class="mod">best</span> </div>
	As usual, you can specify the preferred bitrate instead of using best.<br />
	Once it finishes downloading and merging a stream, it will go right back to monitoring for the next stream - make sure you keep an eye on the storage space if you plan to leave this running 24/7.
 </h4> 
  
  
 <br />

 <h2><a id="ytaqol">ytarchive tips</a></h2>
 <h3>Stop recording before stream ends:</h3>
 <h4>
 If you want to stop an ongoing archive(eg, your laptop is out of battery and your oshi has left the stream), press <span class="emp">Ctrl+C</span>, and <span class="emp">y</span> on the prompt for merging files. <br />
 Make sure you leave some leeway to make sure the download have caught up to the parts you want to keep.<br />
 <img src="11-interrupt.png" alt="interrupted download" /> <br />
 </h4>
  <h2><a id="ytdqol">yt-dlp tips</a></h2>
  <h3>Downloading live streams from the start (makeshift ytarchive)</h3>
  <h4>If, for whatever reason, you cannot get ytarchive working and desperately need to download a livestream that has already begun, you can actually use yt-dlp to do it. <br />
  However, yt-dlp will take much longer to notice a stream has ended, and it does not offer to merge a partial download for you if you want to stop the download before it decided it is finished (you can still manually merge the files).
  <div class="cmds">yt-dlp <span class="mod">--live-from-start</span> <span class="url">https://www.youtube.com/watch?v=######</span></div>
  <br />
  </h4>
  <h3>Config file for default settings</h3>
  <h4>If you can't be bothered to type in your preferred settings every time you use yt-dlp, you can save your default settings by creating a config.txt<br />
  Go to <span class="emp">%appdata%</span> and create the config file under <span class="emp">%appdata%/yt-dlp/config.txt</span><br />
  <br />
  Inside the file, put in what the settings you want yt-dlp to always use unless otherwise specified.<br />
  <br />
  For example, here is my file to (1) always using the cookies file in my main folder, (2) start livestreams from the begining, and (3) default to the best avalible mp4 (and skip the mkv-only formats):
  <div class="cmds">--cookies <span class="emp">"C:/yt/cookies.txt"</span> --live-from-start -f 'bestvideo[ext=mp4]+bestaudio[ext=m4a]'</span> </div>
  <br />
  <img src="12-ytdlpconfig.gif" alt="yt-dlp config file location" /> <br /><br />
  </h4>
  
 <br />
  <h2><a id="bat">Using Batch(.bat) files to start commends with one click</a></h2>
</main>